<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music English Trainer - Aprenda Ingl√™s com M√∫sica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        
        .music-gradient { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #f5576c 75%, #4facfe 100%);
            animation: gradientShift 8s ease-in-out infinite;
        }
        
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .vinyl-record {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: radial-gradient(circle, #1a1a1a 20%, #333 21%, #333 40%, #1a1a1a 41%);
            position: relative;
            animation: spin 3s linear infinite;
        }
        
        .vinyl-record::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: #1a1a1a;
            border-radius: 50%;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .music-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.4s ease;
            cursor: pointer;
        }
        
        .music-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }
        
        .genre-pop { background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
        .genre-rock { background: linear-gradient(135deg, #2d3436, #636e72); }
        .genre-jazz { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .genre-country { background: linear-gradient(135deg, #00b894, #00cec9); }
        .genre-rnb { background: linear-gradient(135deg, #6c5ce7, #a29bfe); }
        .genre-indie { background: linear-gradient(135deg, #fd79a8, #fdcb6e); }
        
        .difficulty-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: bold;
        }
        
        .difficulty-beginner { background: linear-gradient(135deg, #00b894, #00cec9); }
        .difficulty-intermediate { background: linear-gradient(135deg, #fdcb6e, #e17055); }
        .difficulty-advanced { background: linear-gradient(135deg, #e84393, #fd79a8); }
        
        .lyric-line {
            padding: 15px 20px;
            margin: 8px 0;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .lyric-line:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(10px);
        }
        
        .lyric-line.active {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-left-color: #00b894;
            transform: translateX(15px);
            box-shadow: 0 10px 30px rgba(116, 185, 255, 0.3);
        }
        
        .lyric-line.completed {
            background: linear-gradient(135deg, #00b894, #00cec9);
            border-left-color: #00b894;
        }
        
        .word-blank {
            display: inline-block;
            min-width: 80px;
            padding: 4px 8px;
            margin: 0 4px;
            border-bottom: 2px solid #74b9ff;
            background: rgba(116, 185, 255, 0.2);
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
        }
        
        .word-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .word-option {
            padding: 8px 16px;
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .word-option:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 25px rgba(108, 92, 231, 0.4);
        }
        
        .word-option.used {
            background: #636e72;
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .progress-ring {
            width: 120px;
            height: 120px;
            position: relative;
        }
        
        .progress-ring svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        
        .progress-ring circle {
            fill: none;
            stroke-width: 8;
        }
        
        .progress-ring .background {
            stroke: rgba(255, 255, 255, 0.2);
        }
        
        .progress-ring .progress {
            stroke: #00b894;
            stroke-linecap: round;
            transition: stroke-dashoffset 0.5s ease;
        }
        
        .music-player {
            background: linear-gradient(135deg, #2d3436, #636e72);
            border-radius: 25px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .play-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00b894, #00cec9);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .play-button:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0, 184, 148, 0.4);
        }
        
        .waveform {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 40px;
            flex: 1;
            margin: 0 20px;
        }
        
        .wave-bar {
            width: 3px;
            background: linear-gradient(to top, #74b9ff, #0984e3);
            border-radius: 2px;
            animation: wave 1.5s ease-in-out infinite;
        }
        
        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 30px; }
        }
        
        .achievement-popup {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(253, 203, 110, 0.4);
            transform: translateX(400px);
            transition: transform 0.5s ease;
            z-index: 1000;
        }
        
        .achievement-popup.show {
            transform: translateX(0);
        }
        
        .vocabulary-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 10px 0;
            border-left: 4px solid #74b9ff;
        }
        
        .pronunciation-button {
            background: linear-gradient(135deg, #fd79a8, #fdcb6e);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .pronunciation-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(253, 121, 168, 0.4);
        }
        
        .streak-counter {
            background: linear-gradient(135deg, #e84393, #fd79a8);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .level-badge {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .genre-filter {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        
        .filter-button {
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .filter-button.active {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            border-color: #00b894;
        }
        
        .translation-tooltip {
            position: absolute;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            z-index: 100;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .translation-tooltip.show {
            opacity: 1;
        }
        
        .karaoke-mode {
            background: linear-gradient(135deg, #2d3436, #636e72);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
        }
        
        .karaoke-lyrics {
            font-size: 1.5rem;
            line-height: 2;
            margin: 20px 0;
        }
        
        .karaoke-word {
            display: inline-block;
            margin: 0 4px;
            padding: 4px 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .karaoke-word.highlight {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            transform: scale(1.1);
        }
        
        .karaoke-line {
            margin: 15px 0;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .karaoke-line.current {
            background: rgba(116, 185, 255, 0.2);
            transform: scale(1.05);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
        }
        
        .floating-notes {
            position: fixed;
            pointer-events: none;
            z-index: 50;
        }
        
        .music-note {
            position: absolute;
            font-size: 2rem;
            animation: float 3s ease-in-out infinite;
            opacity: 0.7;
        }
        
        @keyframes float {
            0% { transform: translateY(0px) rotate(0deg); opacity: 0.7; }
            50% { transform: translateY(-20px) rotate(180deg); opacity: 1; }
            100% { transform: translateY(-40px) rotate(360deg); opacity: 0; }
        }
        
        .flashcard {
            perspective: 1000px;
            min-height: 300px;
        }
        
        .flashcard-front, .flashcard-back {
            backface-visibility: hidden;
            transition: transform 0.6s;
        }
        
        .flashcard.flipped .flashcard-front {
            transform: rotateY(180deg);
        }
        
        .flashcard.flipped .flashcard-back {
            transform: rotateY(0deg);
        }
        
        .flashcard-back {
            transform: rotateY(180deg);
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        
        .word-match-btn {
            transition: all 0.3s ease;
        }
        
        .word-match-btn.selected {
            background: linear-gradient(135deg, #00b894, #00cec9) !important;
            transform: scale(1.05);
            box-shadow: 0 10px 30px rgba(0, 184, 148, 0.4);
        }
        
        .word-match-btn.matched {
            background: linear-gradient(135deg, #fdcb6e, #e17055) !important;
            opacity: 0.7;
            cursor: not-allowed;
        }
        
        .spelling-input {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 15px;
            font-size: 1.2rem;
            text-align: center;
            color: white;
            transition: all 0.3s ease;
        }
        
        .spelling-input:focus {
            border-color: #74b9ff;
            box-shadow: 0 0 20px rgba(116, 185, 255, 0.3);
            outline: none;
        }
        
        .spelling-input.correct {
            border-color: #00b894;
            background: rgba(0, 184, 148, 0.2);
        }
        
        .spelling-input.incorrect {
            border-color: #e84393;
            background: rgba(232, 67, 147, 0.2);
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body class="music-gradient min-h-screen text-white overflow-x-hidden">
    <!-- Floating Musical Notes -->
    <div class="floating-notes">
        <div class="music-note" style="left: 10%; animation-delay: 0s;">üéµ</div>
        <div class="music-note" style="left: 20%; animation-delay: 1s;">üé∂</div>
        <div class="music-note" style="left: 80%; animation-delay: 2s;">üéº</div>
        <div class="music-note" style="left: 90%; animation-delay: 0.5s;">üé§</div>
    </div>

    <!-- Header -->
    <header class="bg-black/30 backdrop-blur-lg shadow-2xl sticky top-0 z-40">
        <div class="max-w-7xl mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors">
                        <span class="text-xl">‚Üê</span>
                    </button>
                    <div class="flex items-center space-x-4">
                        <div class="vinyl-record w-12 h-12"></div>
                        <div>
                            <h1 class="text-3xl font-black">üéµ MUSIC ENGLISH TRAINER</h1>
                            <p class="text-blue-200">Aprenda Ingl√™s Cantando</p>
                        </div>
                    </div>
                </div>
                
                <div class="flex items-center space-x-6">
                    <!-- Streak Counter -->
                    <div class="text-center">
                        <div class="streak-counter">
                            <span>7</span>
                        </div>
                        <div class="text-xs text-blue-200 mt-2">Dias</div>
                    </div>
                    
                    <!-- Level Badge -->
                    <div class="level-badge">
                        <span>üé§</span>
                        <span>N√≠vel 5</span>
                    </div>
                    
                    <!-- Songs Completed -->
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-400" id="songs-completed">23</div>
                        <div class="text-xs text-blue-200">M√∫sicas</div>
                    </div>
                    
                    <!-- Vocabulary Learned -->
                    <div class="text-center">
                        <div class="text-2xl font-bold text-purple-400" id="vocab-learned">156</div>
                        <div class="text-xs text-blue-200">Palavras</div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 py-8">
        <!-- Main Dashboard -->
        <div id="main-dashboard">
            <!-- Learning Modes -->
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-12">
                <!-- Fill the Blanks -->
                <div class="music-card rounded-3xl p-8" onclick="startFillBlanks()">
                    <div class="text-center">
                        <div class="text-6xl mb-4">üìù</div>
                        <h3 class="text-xl font-bold mb-4">Complete a Letra</h3>
                        <div class="text-sm text-blue-200 mb-4">Preencha as palavras que faltam</div>
                        <div class="difficulty-badge difficulty-beginner mb-4">Iniciante</div>
                        <button class="bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-bold transition-all">
                            Come√ßar
                        </button>
                    </div>
                </div>
                
                <!-- Karaoke Mode -->
                <div class="music-card rounded-3xl p-8" onclick="startKaraoke()">
                    <div class="text-center">
                        <div class="text-6xl mb-4">üé§</div>
                        <h3 class="text-xl font-bold mb-4">Modo Karaok√™</h3>
                        <div class="text-sm text-blue-200 mb-4">Cante junto e pratique pron√∫ncia</div>
                        <div class="difficulty-badge difficulty-intermediate mb-4">Intermedi√°rio</div>
                        <button class="bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-bold transition-all">
                            Come√ßar
                        </button>
                    </div>
                </div>
                
                <!-- Vocabulary Builder -->
                <div class="music-card rounded-3xl p-8" onclick="startVocabulary()">
                    <div class="text-center">
                        <div class="text-6xl mb-4">üìö</div>
                        <h3 class="text-xl font-bold mb-4">Vocabul√°rio Musical</h3>
                        <div class="text-sm text-blue-200 mb-4">Aprenda palavras atrav√©s das m√∫sicas</div>
                        <div class="difficulty-badge difficulty-advanced mb-4">Avan√ßado</div>
                        <button class="bg-white/20 hover:bg-white/30 px-6 py-3 rounded-xl font-bold transition-all">
                            Come√ßar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Genre Selection -->
            <div class="mb-12">
                <h2 class="text-3xl font-bold text-center mb-8">Escolha seu G√™nero Musical</h2>
                <div class="genre-filter justify-center">
                    <button class="filter-button active" onclick="filterGenre('all')">Todos</button>
                    <button class="filter-button" onclick="filterGenre('pop')">Pop</button>
                    <button class="filter-button" onclick="filterGenre('rock')">Rock</button>
                    <button class="filter-button" onclick="filterGenre('jazz')">Jazz</button>
                    <button class="filter-button" onclick="filterGenre('country')">Country</button>
                    <button class="filter-button" onclick="filterGenre('rnb')">R&B</button>
                    <button class="filter-button" onclick="filterGenre('indie')">Indie</button>
                </div>
            </div>

            <!-- Popular Songs -->
            <div class="mb-12">
                <h2 class="text-3xl font-bold mb-8">M√∫sicas Populares</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="songs-grid">
                    <!-- Song Cards -->
                    <div class="music-card rounded-2xl p-6 genre-pop" data-genre="pop" onclick="selectSong('shape-of-you')">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center text-2xl">üéµ</div>
                            <div>
                                <h4 class="font-bold text-lg">Shape of You</h4>
                                <p class="text-sm opacity-80">Ed Sheeran</p>
                                <div class="difficulty-badge difficulty-beginner mt-1">Iniciante</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>‚≠ê 4.8/5</span>
                            <span>üë• 2.1k plays</span>
                        </div>
                    </div>

                    <div class="music-card rounded-2xl p-6 genre-rock" data-genre="rock" onclick="selectSong('bohemian-rhapsody')">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center text-2xl">üé∏</div>
                            <div>
                                <h4 class="font-bold text-lg">Bohemian Rhapsody</h4>
                                <p class="text-sm opacity-80">Queen</p>
                                <div class="difficulty-badge difficulty-advanced mt-1">Avan√ßado</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>‚≠ê 4.9/5</span>
                            <span>üë• 3.5k plays</span>
                        </div>
                    </div>

                    <div class="music-card rounded-2xl p-6 genre-pop" data-genre="pop" onclick="selectSong('blinding-lights')">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center text-2xl">‚ú®</div>
                            <div>
                                <h4 class="font-bold text-lg">Blinding Lights</h4>
                                <p class="text-sm opacity-80">The Weeknd</p>
                                <div class="difficulty-badge difficulty-intermediate mt-1">Intermedi√°rio</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>‚≠ê 4.7/5</span>
                            <span>üë• 1.8k plays</span>
                        </div>
                    </div>

                    <div class="music-card rounded-2xl p-6 genre-jazz" data-genre="jazz" onclick="selectSong('fly-me-to-moon')">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center text-2xl">üåô</div>
                            <div>
                                <h4 class="font-bold text-lg">Fly Me to the Moon</h4>
                                <p class="text-sm opacity-80">Frank Sinatra</p>
                                <div class="difficulty-badge difficulty-intermediate mt-1">Intermedi√°rio</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>‚≠ê 4.6/5</span>
                            <span>üë• 1.2k plays</span>
                        </div>
                    </div>

                    <div class="music-card rounded-2xl p-6 genre-country" data-genre="country" onclick="selectSong('country-roads')">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center text-2xl">üõ£Ô∏è</div>
                            <div>
                                <h4 class="font-bold text-lg">Country Roads</h4>
                                <p class="text-sm opacity-80">John Denver</p>
                                <div class="difficulty-badge difficulty-beginner mt-1">Iniciante</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>‚≠ê 4.5/5</span>
                            <span>üë• 900 plays</span>
                        </div>
                    </div>

                    <div class="music-card rounded-2xl p-6 genre-rnb" data-genre="rnb" onclick="selectSong('stay-with-me')">
                        <div class="flex items-center space-x-4 mb-4">
                            <div class="w-16 h-16 bg-white/20 rounded-lg flex items-center justify-center text-2xl">üí´</div>
                            <div>
                                <h4 class="font-bold text-lg">Stay With Me</h4>
                                <p class="text-sm opacity-80">Sam Smith</p>
                                <div class="difficulty-badge difficulty-intermediate mt-1">Intermedi√°rio</div>
                            </div>
                        </div>
                        <div class="flex justify-between items-center text-sm">
                            <span>‚≠ê 4.4/5</span>
                            <span>üë• 1.5k plays</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Learning Statistics -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="text-4xl mb-4">üéØ</div>
                    <div class="text-2xl font-bold text-green-400">87%</div>
                    <div class="text-sm text-gray-300">Precis√£o M√©dia</div>
                </div>
                
                <div class="stat-card">
                    <div class="text-4xl mb-4">‚ö°</div>
                    <div class="text-2xl font-bold text-blue-400">45</div>
                    <div class="text-sm text-gray-300">Palavras/Min</div>
                </div>
                
                <div class="stat-card">
                    <div class="text-4xl mb-4">üèÜ</div>
                    <div class="text-2xl font-bold text-yellow-400">12</div>
                    <div class="text-sm text-gray-300">Conquistas</div>
                </div>
                
                <div class="stat-card">
                    <div class="text-4xl mb-4">üìà</div>
                    <div class="text-2xl font-bold text-purple-400">+23%</div>
                    <div class="text-sm text-gray-300">Melhoria Semanal</div>
                </div>
            </div>
        </div>

        <!-- Fill the Blanks Interface -->
        <div id="fill-blanks-interface" style="display: none;">
            <div class="max-w-4xl mx-auto">
                <!-- Song Header -->
                <div class="music-card rounded-2xl p-6 mb-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-white/20 rounded-lg flex items-center justify-center text-3xl">üéµ</div>
                            <div>
                                <h3 class="text-2xl font-bold" id="song-title">Shape of You</h3>
                                <p class="text-lg text-blue-200" id="song-artist">Ed Sheeran</p>
                                <div class="difficulty-badge difficulty-beginner mt-2">Iniciante</div>
                            </div>
                        </div>
                        
                        <div class="text-right">
                            <div class="progress-ring">
                                <svg>
                                    <circle class="background" cx="60" cy="60" r="52"></circle>
                                    <circle class="progress" cx="60" cy="60" r="52" 
                                            stroke-dasharray="327" stroke-dashoffset="245" id="progress-circle"></circle>
                                </svg>
                                <div class="absolute inset-0 flex items-center justify-center">
                                    <span class="text-xl font-bold" id="progress-text">25%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Music Player -->
                <div class="music-player">
                    <div class="flex items-center">
                        <div class="play-button" onclick="togglePlayback()">
                            <span id="play-icon">‚ñ∂Ô∏è</span>
                        </div>
                        
                        <div class="waveform">
                            <div class="wave-bar" style="height: 15px; animation-delay: 0s;"></div>
                            <div class="wave-bar" style="height: 25px; animation-delay: 0.1s;"></div>
                            <div class="wave-bar" style="height: 20px; animation-delay: 0.2s;"></div>
                            <div class="wave-bar" style="height: 30px; animation-delay: 0.3s;"></div>
                            <div class="wave-bar" style="height: 18px; animation-delay: 0.4s;"></div>
                            <div class="wave-bar" style="height: 28px; animation-delay: 0.5s;"></div>
                            <div class="wave-bar" style="height: 22px; animation-delay: 0.6s;"></div>
                            <div class="wave-bar" style="height: 26px; animation-delay: 0.7s;"></div>
                            <div class="wave-bar" style="height: 16px; animation-delay: 0.8s;"></div>
                            <div class="wave-bar" style="height: 24px; animation-delay: 0.9s;"></div>
                        </div>
                        
                        <div class="text-right">
                            <div class="text-sm text-gray-300">2:45 / 3:53</div>
                        </div>
                    </div>
                </div>

                <!-- Lyrics with Blanks -->
                <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8 mb-8">
                    <h4 class="text-xl font-bold mb-6 text-center">Complete a Letra</h4>
                    
                    <div class="space-y-4" id="lyrics-container">
                        <div class="lyric-line active">
                            The club isn't the best place to find a <span class="word-blank" data-word="lover">_____</span>
                        </div>
                        <div class="lyric-line">
                            So the bar is where I <span class="word-blank" data-word="go">___</span>
                        </div>
                        <div class="lyric-line">
                            Me and my friends at the table doing <span class="word-blank" data-word="shots">_____</span>
                        </div>
                        <div class="lyric-line">
                            Drinking fast and then we talk <span class="word-blank" data-word="slow">____</span>
                        </div>
                    </div>

                    <!-- Word Options -->
                    <div class="word-options" id="word-options">
                        <div class="word-option" onclick="selectWord('lover')">lover</div>
                        <div class="word-option" onclick="selectWord('go')">go</div>
                        <div class="word-option" onclick="selectWord('shots')">shots</div>
                        <div class="word-option" onclick="selectWord('slow')">slow</div>
                        <div class="word-option" onclick="selectWord('fast')">fast</div>
                        <div class="word-option" onclick="selectWord('dance')">dance</div>
                    </div>

                    <!-- Hint Button -->
                    <div class="text-center mt-6">
                        <button onclick="showHint()" class="bg-gradient-to-r from-yellow-500 to-orange-500 px-6 py-3 rounded-xl font-bold hover:from-yellow-600 hover:to-orange-600 transition-all">
                            üí° Dica
                        </button>
                    </div>
                </div>

                <!-- Vocabulary Section -->
                <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-8">
                    <h4 class="text-xl font-bold mb-6">Vocabul√°rio da M√∫sica</h4>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="vocabulary-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-bold text-lg">Lover</div>
                                    <div class="text-sm text-gray-300">Amante, namorado(a)</div>
                                    <div class="text-xs text-blue-300 mt-1">/Ààl åv…ôr/</div>
                                </div>
                                <button class="pronunciation-button" onclick="playPronunciation('lover')">
                                    üîä
                                </button>
                            </div>
                        </div>
                        
                        <div class="vocabulary-card">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-bold text-lg">Shots</div>
                                    <div class="text-sm text-gray-300">Doses (de bebida)</div>
                                    <div class="text-xs text-blue-300 mt-1">/ É…íts/</div>
                                </div>
                                <button class="pronunciation-button" onclick="playPronunciation('shots')">
                                    üîä
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Karaoke Interface -->
        <div id="karaoke-interface" style="display: none;">
            <div class="max-w-6xl mx-auto">
                <!-- Karaoke Header -->
                <div class="music-card rounded-2xl p-6 mb-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-white/20 rounded-lg flex items-center justify-center text-3xl">üé§</div>
                            <div>
                                <h3 class="text-2xl font-bold" id="karaoke-song-title">Shape of You</h3>
                                <p class="text-lg text-blue-200" id="karaoke-song-artist">Ed Sheeran</p>
                                <div class="difficulty-badge difficulty-intermediate mt-2">Karaok√™</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-6">
                            <!-- Score -->
                            <div class="text-center">
                                <div class="text-3xl font-bold text-yellow-400" id="karaoke-score">0</div>
                                <div class="text-sm text-gray-300">Pontos</div>
                            </div>
                            
                            <!-- Accuracy -->
                            <div class="text-center">
                                <div class="text-3xl font-bold text-green-400" id="karaoke-accuracy">100%</div>
                                <div class="text-sm text-gray-300">Precis√£o</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Karaoke Player -->
                <div class="karaoke-mode mb-8">
                    <!-- Progress Bar -->
                    <div class="bg-white/10 rounded-full h-2 mb-6">
                        <div class="bg-gradient-to-r from-green-500 to-blue-500 h-2 rounded-full transition-all duration-300" 
                             style="width: 0%" id="karaoke-progress"></div>
                    </div>

                    <!-- Current Verse Display -->
                    <div class="text-center mb-8">
                        <div class="text-sm text-gray-400 mb-2">Verso Atual</div>
                        <div class="text-lg font-bold" id="current-verse">Verso 1 de 4</div>
                    </div>

                    <!-- Karaoke Lyrics Display -->
                    <div class="karaoke-lyrics bg-black/30 rounded-3xl p-8 mb-8" id="karaoke-lyrics">
                        <div class="text-center mb-4">
                            <div class="text-sm text-gray-400">Cante junto:</div>
                        </div>
                        
                        <div class="text-2xl leading-relaxed text-center" id="lyrics-display">
                            <div class="karaoke-line current mb-4">
                                <span class="karaoke-word" data-time="0">The</span>
                                <span class="karaoke-word" data-time="0.5">club</span>
                                <span class="karaoke-word" data-time="1">isn't</span>
                                <span class="karaoke-word" data-time="1.5">the</span>
                                <span class="karaoke-word highlight" data-time="2">best</span>
                                <span class="karaoke-word" data-time="2.5">place</span>
                                <span class="karaoke-word" data-time="3">to</span>
                                <span class="karaoke-word" data-time="3.5">find</span>
                                <span class="karaoke-word" data-time="4">a</span>
                                <span class="karaoke-word" data-time="4.5">lover</span>
                            </div>
                            
                            <div class="karaoke-line mb-4 opacity-50">
                                <span class="karaoke-word">So</span>
                                <span class="karaoke-word">the</span>
                                <span class="karaoke-word">bar</span>
                                <span class="karaoke-word">is</span>
                                <span class="karaoke-word">where</span>
                                <span class="karaoke-word">I</span>
                                <span class="karaoke-word">go</span>
                            </div>
                        </div>
                    </div>

                    <!-- Karaoke Controls -->
                    <div class="flex justify-center space-x-4 mb-8">
                        <button onclick="startKaraokePlayback()" id="karaoke-play-btn" 
                                class="bg-gradient-to-r from-green-500 to-blue-500 px-8 py-4 rounded-2xl font-bold text-lg hover:from-green-600 hover:to-blue-600 transition-all">
                            üé§ Come√ßar Karaok√™
                        </button>
                        <button onclick="pauseKaraoke()" 
                                class="bg-gradient-to-r from-yellow-500 to-orange-500 px-8 py-4 rounded-2xl font-bold text-lg hover:from-yellow-600 hover:to-orange-600 transition-all">
                            ‚è∏Ô∏è Pausar
                        </button>
                        <button onclick="restartKaraoke()" 
                                class="bg-gradient-to-r from-purple-500 to-pink-500 px-8 py-4 rounded-2xl font-bold text-lg hover:from-purple-600 hover:to-pink-600 transition-all">
                            üîÑ Reiniciar
                        </button>
                    </div>

                    <!-- Karaoke Features -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- Pronunciation Practice -->
                        <div class="bg-white/10 rounded-2xl p-6">
                            <h4 class="text-lg font-bold mb-4 flex items-center">
                                <span class="mr-2">üó£Ô∏è</span>
                                Pr√°tica de Pron√∫ncia
                            </h4>
                            <div class="space-y-3">
                                <button onclick="practiceWord('lover')" class="w-full bg-white/10 hover:bg-white/20 p-3 rounded-lg transition-all text-left">
                                    <div class="font-bold">lover</div>
                                    <div class="text-sm text-gray-300">/Ààl åv…ôr/</div>
                                </button>
                                <button onclick="practiceWord('club')" class="w-full bg-white/10 hover:bg-white/20 p-3 rounded-lg transition-all text-left">
                                    <div class="font-bold">club</div>
                                    <div class="text-sm text-gray-300">/kl åb/</div>
                                </button>
                            </div>
                        </div>

                        <!-- Speed Control -->
                        <div class="bg-white/10 rounded-2xl p-6">
                            <h4 class="text-lg font-bold mb-4 flex items-center">
                                <span class="mr-2">‚ö°</span>
                                Velocidade
                            </h4>
                            <div class="space-y-3">
                                <button onclick="setKaraokeSpeed(0.75)" class="w-full bg-blue-600 hover:bg-blue-700 p-3 rounded-lg transition-all">
                                    üêå Lento (75%)
                                </button>
                                <button onclick="setKaraokeSpeed(1)" class="w-full bg-green-600 hover:bg-green-700 p-3 rounded-lg transition-all">
                                    üéØ Normal (100%)
                                </button>
                                <button onclick="setKaraokeSpeed(1.25)" class="w-full bg-red-600 hover:bg-red-700 p-3 rounded-lg transition-all">
                                    üöÄ R√°pido (125%)
                                </button>
                            </div>
                        </div>

                        <!-- Karaoke Stats -->
                        <div class="bg-white/10 rounded-2xl p-6">
                            <h4 class="text-lg font-bold mb-4 flex items-center">
                                <span class="mr-2">üìä</span>
                                Estat√≠sticas
                            </h4>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span>Palavras cantadas:</span>
                                    <span class="font-bold text-green-400" id="words-sung">0/45</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Tempo no ritmo:</span>
                                    <span class="font-bold text-blue-400" id="timing-accuracy">95%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span>Sequ√™ncia:</span>
                                    <span class="font-bold text-yellow-400" id="streak">12</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vocabulary Interface -->
        <div id="vocabulary-interface" style="display: none;">
            <div class="max-w-6xl mx-auto">
                <!-- Vocabulary Header -->
                <div class="music-card rounded-2xl p-6 mb-8">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="w-20 h-20 bg-white/20 rounded-lg flex items-center justify-center text-3xl">üìö</div>
                            <div>
                                <h3 class="text-2xl font-bold">Vocabul√°rio Musical</h3>
                                <p class="text-lg text-blue-200">Aprenda palavras atrav√©s da m√∫sica</p>
                                <div class="difficulty-badge difficulty-advanced mt-2">Vocabul√°rio</div>
                            </div>
                        </div>
                        
                        <div class="flex items-center space-x-6">
                            <!-- Words Learned -->
                            <div class="text-center">
                                <div class="text-3xl font-bold text-purple-400" id="vocab-words-learned">156</div>
                                <div class="text-sm text-gray-300">Palavras</div>
                            </div>
                            
                            <!-- Study Streak -->
                            <div class="text-center">
                                <div class="text-3xl font-bold text-orange-400" id="vocab-streak">12</div>
                                <div class="text-sm text-gray-300">Dias</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Vocabulary Modes -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <div class="music-card rounded-2xl p-6" onclick="startFlashcards()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üÉè</div>
                            <h4 class="text-lg font-bold mb-2">Flashcards</h4>
                            <div class="text-sm text-gray-300">Pratique com cart√µes interativos</div>
                        </div>
                    </div>
                    
                    <div class="music-card rounded-2xl p-6" onclick="startWordMatch()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">üéØ</div>
                            <h4 class="text-lg font-bold mb-2">Associa√ß√£o</h4>
                            <div class="text-sm text-gray-300">Conecte palavras e significados</div>
                        </div>
                    </div>
                    
                    <div class="music-card rounded-2xl p-6" onclick="startSpellingChallenge()">
                        <div class="text-center">
                            <div class="text-4xl mb-4">‚úèÔ∏è</div>
                            <h4 class="text-lg font-bold mb-2">Ortografia</h4>
                            <div class="text-sm text-gray-300">Pratique a escrita das palavras</div>
                        </div>
                    </div>
                </div>

                <!-- Flashcards Mode -->
                <div id="flashcards-mode" class="bg-white/10 rounded-3xl p-8 mb-8" style="display: none;">
                    <h4 class="text-2xl font-bold text-center mb-8">üÉè Flashcards Musicais</h4>
                    
                    <div class="max-w-md mx-auto">
                        <!-- Flashcard -->
                        <div class="flashcard bg-gradient-to-br from-purple-600 to-pink-600 rounded-3xl p-8 text-center cursor-pointer transform transition-all duration-500 hover:scale-105" 
                             onclick="flipCard()" id="flashcard">
                            <div class="flashcard-front" id="flashcard-front">
                                <div class="text-4xl font-bold mb-4" id="flashcard-word">LOVER</div>
                                <div class="text-sm text-purple-200 mb-4">De: "Shape of You" - Ed Sheeran</div>
                                <div class="text-xs text-purple-300">Clique para ver a tradu√ß√£o</div>
                            </div>
                            
                            <div class="flashcard-back hidden" id="flashcard-back">
                                <div class="text-2xl font-bold mb-4" id="flashcard-translation">AMANTE / NAMORADO(A)</div>
                                <div class="text-lg mb-4" id="flashcard-pronunciation">/Ààl åv…ôr/</div>
                                <div class="text-sm text-purple-200 mb-4" id="flashcard-example">
                                    "The club isn't the best place to find a lover"
                                </div>
                                <button onclick="playWordPronunciation()" class="pronunciation-button mx-auto">
                                    üîä
                                </button>
                            </div>
                        </div>
                        
                        <!-- Flashcard Controls -->
                        <div class="flex justify-center space-x-4 mt-8">
                            <button onclick="markDifficult()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-xl font-bold transition-all">
                                üò∞ Dif√≠cil
                            </button>
                            <button onclick="markEasy()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-xl font-bold transition-all">
                                üòä F√°cil
                            </button>
                            <button onclick="nextFlashcard()" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-xl font-bold transition-all">
                                ‚û°Ô∏è Pr√≥xima
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Word Match Game -->
                <div id="word-match-mode" class="bg-white/10 rounded-3xl p-8 mb-8" style="display: none;">
                    <h4 class="text-2xl font-bold text-center mb-8">üéØ Jogo de Associa√ß√£o</h4>
                    
                    <div class="grid grid-cols-2 gap-8">
                        <!-- English Words -->
                        <div>
                            <h5 class="text-lg font-bold mb-4 text-center">Palavras em Ingl√™s</h5>
                            <div class="space-y-3" id="english-words">
                                <button onclick="selectMatchWord('lover', 'en')" class="word-match-btn w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-xl font-bold transition-all" data-word="lover">
                                    LOVER
                                </button>
                                <button onclick="selectMatchWord('club', 'en')" class="word-match-btn w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-xl font-bold transition-all" data-word="club">
                                    CLUB
                                </button>
                                <button onclick="selectMatchWord('shots', 'en')" class="word-match-btn w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-xl font-bold transition-all" data-word="shots">
                                    SHOTS
                                </button>
                                <button onclick="selectMatchWord('slow', 'en')" class="word-match-btn w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-xl font-bold transition-all" data-word="slow">
                                    SLOW
                                </button>
                            </div>
                        </div>
                        
                        <!-- Portuguese Translations -->
                        <div>
                            <h5 class="text-lg font-bold mb-4 text-center">Tradu√ß√µes</h5>
                            <div class="space-y-3" id="portuguese-words">
                                <button onclick="selectMatchWord('devagar', 'pt')" class="word-match-btn w-full bg-purple-600 hover:bg-purple-700 p-4 rounded-xl font-bold transition-all" data-word="slow">
                                    DEVAGAR
                                </button>
                                <button onclick="selectMatchWord('amante', 'pt')" class="word-match-btn w-full bg-purple-600 hover:bg-purple-700 p-4 rounded-xl font-bold transition-all" data-word="lover">
                                    AMANTE
                                </button>
                                <button onclick="selectMatchWord('doses', 'pt')" class="word-match-btn w-full bg-purple-600 hover:bg-purple-700 p-4 rounded-xl font-bold transition-all" data-word="shots">
                                    DOSES
                                </button>
                                <button onclick="selectMatchWord('clube', 'pt')" class="word-match-btn w-full bg-purple-600 hover:bg-purple-700 p-4 rounded-xl font-bold transition-all" data-word="club">
                                    CLUBE
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Match Score -->
                    <div class="text-center mt-8">
                        <div class="text-2xl font-bold text-green-400" id="match-score">Pontua√ß√£o: 0</div>
                        <div class="text-sm text-gray-300 mt-2" id="matches-made">Acertos: 0/4</div>
                    </div>
                </div>

                <!-- Spelling Challenge -->
                <div id="spelling-mode" class="bg-white/10 rounded-3xl p-8 mb-8" style="display: none;">
                    <h4 class="text-2xl font-bold text-center mb-8">‚úèÔ∏è Desafio de Ortografia</h4>
                    
                    <div class="max-w-md mx-auto text-center">
                        <!-- Audio Pronunciation -->
                        <div class="mb-6">
                            <button onclick="playSpellingWord()" class="bg-gradient-to-r from-green-500 to-blue-500 p-6 rounded-full text-4xl hover:scale-110 transition-all">
                                üîä
                            </button>
                            <div class="text-sm text-gray-300 mt-2">Clique para ouvir a palavra</div>
                        </div>
                        
                        <!-- Translation Hint -->
                        <div class="mb-6">
                            <div class="text-lg text-blue-200">Tradu√ß√£o: <span id="spelling-hint">Amante, namorado(a)</span></div>
                        </div>
                        
                        <!-- Spelling Input -->
                        <div class="mb-6">
                            <input type="text" id="spelling-input" placeholder="Digite a palavra em ingl√™s..." 
                                   class="spelling-input w-full">
                        </div>
                        
                        <!-- Letter Hints -->
                        <div class="mb-6">
                            <div class="text-sm text-gray-400 mb-2">Dica de letras:</div>
                            <div class="text-2xl font-mono tracking-widest" id="letter-hints">L _ V _ R</div>
                        </div>
                        
                        <!-- Spelling Controls -->
                        <div class="flex justify-center space-x-4">
                            <button onclick="checkSpelling()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-xl font-bold transition-all">
                                ‚úÖ Verificar
                            </button>
                            <button onclick="showSpellingHint()" class="bg-yellow-600 hover:bg-yellow-700 px-6 py-3 rounded-xl font-bold transition-all">
                                üí° Dica
                            </button>
                            <button onclick="nextSpellingWord()" class="bg-blue-600 hover:bg-blue-700 px-6 py-3 rounded-xl font-bold transition-all">
                                ‚û°Ô∏è Pr√≥xima
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Vocabulary Library -->
                <div class="bg-white/10 rounded-3xl p-8">
                    <h4 class="text-2xl font-bold mb-6">üìñ Biblioteca de Vocabul√°rio</h4>
                    
                    <!-- Category Filters -->
                    <div class="flex flex-wrap gap-3 mb-6">
                        <button onclick="filterVocab('all')" class="filter-button active">Todas</button>
                        <button onclick="filterVocab('emotions')" class="filter-button">Emo√ß√µes</button>
                        <button onclick="filterVocab('actions')" class="filter-button">A√ß√µes</button>
                        <button onclick="filterVocab('objects')" class="filter-button">Objetos</button>
                        <button onclick="filterVocab('places')" class="filter-button">Lugares</button>
                    </div>
                    
                    <!-- Vocabulary Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="vocabulary-grid">
                        <div class="vocabulary-card" data-category="emotions">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">Love</div>
                                    <div class="text-sm text-gray-300">Amor</div>
                                    <div class="text-xs text-blue-300 mt-1">/l åv/</div>
                                    <div class="text-xs text-purple-300 mt-1">De: "Love Story" - Taylor Swift</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="playVocabPronunciation('love')" class="pronunciation-button">
                                        üîä
                                    </button>
                                    <button onclick="addToFavorites('love')" class="pronunciation-button">
                                        ‚≠ê
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="vocabulary-card" data-category="actions">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">Dance</div>
                                    <div class="text-sm text-gray-300">Dan√ßar</div>
                                    <div class="text-xs text-blue-300 mt-1">/d√¶ns/</div>
                                    <div class="text-xs text-purple-300 mt-1">De: "Dancing Queen" - ABBA</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="playVocabPronunciation('dance')" class="pronunciation-button">
                                        üîä
                                    </button>
                                    <button onclick="addToFavorites('dance')" class="pronunciation-button">
                                        ‚≠ê
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="vocabulary-card" data-category="places">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">Club</div>
                                    <div class="text-sm text-gray-300">Clube, boate</div>
                                    <div class="text-xs text-blue-300 mt-1">/kl åb/</div>
                                    <div class="text-xs text-purple-300 mt-1">De: "Shape of You" - Ed Sheeran</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="playVocabPronunciation('club')" class="pronunciation-button">
                                        üîä
                                    </button>
                                    <button onclick="addToFavorites('club')" class="pronunciation-button">
                                        ‚≠ê
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="vocabulary-card" data-category="objects">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">Shots</div>
                                    <div class="text-sm text-gray-300">Doses (bebida)</div>
                                    <div class="text-xs text-blue-300 mt-1">/ É…íts/</div>
                                    <div class="text-xs text-purple-300 mt-1">De: "Shape of You" - Ed Sheeran</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="playVocabPronunciation('shots')" class="pronunciation-button">
                                        üîä
                                    </button>
                                    <button onclick="addToFavorites('shots')" class="pronunciation-button">
                                        ‚≠ê
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="vocabulary-card" data-category="actions">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">Sing</div>
                                    <div class="text-sm text-gray-300">Cantar</div>
                                    <div class="text-xs text-blue-300 mt-1">/s…™≈ã/</div>
                                    <div class="text-xs text-purple-300 mt-1">De: "Sing" - Ed Sheeran</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="playVocabPronunciation('sing')" class="pronunciation-button">
                                        üîä
                                    </button>
                                    <button onclick="addToFavorites('sing')" class="pronunciation-button">
                                        ‚≠ê
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="vocabulary-card" data-category="emotions">
                            <div class="flex items-center justify-between">
                                <div class="flex-1">
                                    <div class="font-bold text-lg">Happy</div>
                                    <div class="text-sm text-gray-300">Feliz</div>
                                    <div class="text-xs text-blue-300 mt-1">/Ààh√¶pi/</div>
                                    <div class="text-xs text-purple-300 mt-1">De: "Happy" - Pharrell Williams</div>
                                </div>
                                <div class="flex space-x-2">
                                    <button onclick="playVocabPronunciation('happy')" class="pronunciation-button">
                                        üîä
                                    </button>
                                    <button onclick="addToFavorites('happy')" class="pronunciation-button">
                                        ‚≠ê
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div id="achievement-popup" class="achievement-popup">
        <div class="flex items-center space-x-4">
            <div class="text-4xl">üèÜ</div>
            <div>
                <div class="font-bold text-lg">Nova Conquista!</div>
                <div class="text-sm" id="achievement-text">Primeira m√∫sica completada!</div>
            </div>
        </div>
    </div>

    <!-- Translation Tooltip -->
    <div id="translation-tooltip" class="translation-tooltip"></div>

    <script>
        // App State
        let musicState = {
            currentMode: 'dashboard',
            selectedSong: null,
            isPlaying: false,
            currentWordIndex: 0,
            completedWords: 0,
            totalWords: 4,
            selectedGenre: 'all',
            karaokeWordIndex: 0,
            karaokeInterval: null,
            karaokeSpeed: 1,
            karaokeScore: 0,
            achievements: [],
            vocabularyMode: null,
            flashcardIndex: 0,
            matchGame: {
                selectedWord: null,
                selectedLang: null,
                matches: 0,
                score: 0
            },
            spellingWords: ['lover', 'club', 'shots', 'slow', 'dance', 'happy'],
            currentSpellingIndex: 0
        };

        // Songs Database
        const songsDatabase = {
            'shape-of-you': {
                title: 'Shape of You',
                artist: 'Ed Sheeran',
                genre: 'pop',
                difficulty: 'beginner',
                lyrics: [
                    { text: "The club isn't the best place to find a", blank: "lover" },
                    { text: "So the bar is where I", blank: "go" },
                    { text: "Me and my friends at the table doing", blank: "shots" },
                    { text: "Drinking fast and then we talk", blank: "slow" }
                ],
                vocabulary: [
                    { word: 'lover', translation: 'amante, namorado(a)', pronunciation: '/Ààl åv…ôr/' },
                    { word: 'shots', translation: 'doses (de bebida)', pronunciation: '/ É…íts/' }
                ]
            }
        };

        // Vocabulary Database
        const vocabularyDatabase = [
            { word: 'lover', translation: 'amante, namorado(a)', pronunciation: '/Ààl åv…ôr/', song: 'Shape of You - Ed Sheeran', category: 'emotions' },
            { word: 'club', translation: 'clube, boate', pronunciation: '/kl åb/', song: 'Shape of You - Ed Sheeran', category: 'places' },
            { word: 'shots', translation: 'doses (bebida)', pronunciation: '/ É…íts/', song: 'Shape of You - Ed Sheeran', category: 'objects' },
            { word: 'slow', translation: 'devagar', pronunciation: '/slo ä/', song: 'Shape of You - Ed Sheeran', category: 'actions' },
            { word: 'dance', translation: 'dan√ßar', pronunciation: '/d√¶ns/', song: 'Dancing Queen - ABBA', category: 'actions' },
            { word: 'happy', translation: 'feliz', pronunciation: '/Ààh√¶pi/', song: 'Happy - Pharrell Williams', category: 'emotions' }
        ];

        // Start Fill the Blanks Mode
        function startFillBlanks() {
            showFillBlanksInterface();
            initializeFillBlanks();
        }

        // Show Fill the Blanks Interface
        function showFillBlanksInterface() {
            document.getElementById('main-dashboard').style.display = 'none';
            document.getElementById('fill-blanks-interface').style.display = 'block';
            document.getElementById('karaoke-interface').style.display = 'none';
            document.getElementById('vocabulary-interface').style.display = 'none';
            musicState.currentMode = 'fill-blanks';
        }

        // Initialize Fill the Blanks
        function initializeFillBlanks() {
            musicState.selectedSong = 'shape-of-you';
            musicState.completedWords = 0;
            musicState.currentWordIndex = 0;
            
            loadSongData();
            updateProgress();
        }

        // Load Song Data
        function loadSongData() {
            const song = songsDatabase[musicState.selectedSong];
            
            document.getElementById('song-title').textContent = song.title;
            document.getElementById('song-artist').textContent = song.artist;
            
            // Reset word options
            document.querySelectorAll('.word-option').forEach(option => {
                option.classList.remove('used');
            });
        }

        // Select Word
        function selectWord(word) {
            const wordOption = event.target;
            
            if (wordOption.classList.contains('used')) return;
            
            // Find active blank
            const activeBlank = document.querySelector('.lyric-line.active .word-blank');
            
            if (activeBlank && activeBlank.dataset.word === word) {
                // Correct answer
                activeBlank.textContent = word;
                activeBlank.style.background = 'linear-gradient(135deg, #00b894, #00cec9)';
                
                wordOption.classList.add('used');
                
                // Mark line as completed
                const activeLine = document.querySelector('.lyric-line.active');
                activeLine.classList.remove('active');
                activeLine.classList.add('completed');
                
                musicState.completedWords++;
                updateProgress();
                
                // Move to next line
                const nextLine = activeLine.nextElementSibling;
                if (nextLine && nextLine.classList.contains('lyric-line')) {
                    nextLine.classList.add('active');
                } else {
                    // Song completed
                    showSongCompletion();
                }
                
                // Show achievement
                if (musicState.completedWords === 1) {
                    showAchievement('Primeira palavra correta!');
                }
                
            } else if (activeBlank) {
                // Wrong answer
                activeBlank.style.background = 'linear-gradient(135deg, #e84393, #fd79a8)';
                setTimeout(() => {
                    activeBlank.style.background = 'rgba(116, 185, 255, 0.2)';
                }, 1000);
            }
        }

        // Update Progress
        function updateProgress() {
            const percentage = (musicState.completedWords / musicState.totalWords) * 100;
            const circumference = 2 * Math.PI * 52;
            const offset = circumference - (percentage / 100) * circumference;
            
            document.getElementById('progress-circle').style.strokeDashoffset = offset;
            document.getElementById('progress-text').textContent = Math.round(percentage) + '%';
        }

        // Show Song Completion
        function showSongCompletion() {
            const completionElement = document.createElement('div');
            completionElement.className = 'fixed inset-0 bg-black/80 flex items-center justify-center z-50';
            completionElement.innerHTML = `
                <div class="bg-white/10 backdrop-blur-lg rounded-3xl p-12 text-center max-w-md">
                    <div class="text-8xl mb-6">üéâ</div>
                    <h2 class="text-4xl font-bold mb-4">Parab√©ns!</h2>
                    <div class="text-xl text-gray-300 mb-8">Voc√™ completou a m√∫sica!</div>
                    <div class="grid grid-cols-2 gap-6 mb-8">
                        <div>
                            <div class="text-3xl font-bold text-green-400">100%</div>
                            <div class="text-sm text-gray-300">Precis√£o</div>
                        </div>
                        <div>
                            <div class="text-3xl font-bold text-blue-400">+50</div>
                            <div class="text-sm text-gray-300">XP Ganho</div>
                        </div>
                    </div>
                    <div class="space-y-3">
                        <button onclick="tryAnotherSong()" class="w-full bg-gradient-to-r from-green-500 to-blue-500 px-6 py-3 rounded-xl font-bold hover:from-green-600 hover:to-blue-600 transition-all">
                            üéµ Tentar Outra M√∫sica
                        </button>
                        <button onclick="startKaraoke()" class="w-full bg-gradient-to-r from-purple-500 to-pink-500 px-6 py-3 rounded-xl font-bold hover:from-purple-600 hover:to-pink-600 transition-all">
                            üé§ Modo Karaok√™
                        </button>
                        <button onclick="closeSongCompletion()" class="w-full bg-gray-600 hover:bg-gray-700 px-6 py-3 rounded-xl font-bold transition-all">
                            Voltar ao Menu
                        </button>
                    </div>
                </div>
            `;
            document.body.appendChild(completionElement);
            
            // Update stats
            const songsCompleted = document.getElementById('songs-completed');
            songsCompleted.textContent = parseInt(songsCompleted.textContent) + 1;
            
            showAchievement('M√∫sica completada! +50 XP');
        }

        // Close Song Completion
        function closeSongCompletion() {
            const completionScreen = document.querySelector('.fixed.inset-0');
            if (completionScreen) {
                document.body.removeChild(completionScreen);
            }
            goBackToDashboard();
        }

        // Try Another Song
        function tryAnotherSong() {
            closeSongCompletion();
            initializeFillBlanks();
        }

        // Start Karaoke Mode
        function startKaraoke() {
            if (musicState.currentMode === 'fill-blanks') {
                closeSongCompletion();
            }
            
            document.getElementById('main-dashboard').style.display = 'none';
            document.getElementById('fill-blanks-interface').style.display = 'none';
            document.getElementById('karaoke-interface').style.display = 'block';
            document.getElementById('vocabulary-interface').style.display = 'none';
            musicState.currentMode = 'karaoke';
            
            // Initialize karaoke
            musicState.karaokeScore = 0;
            musicState.karaokeWordIndex = 0;
            document.getElementById('karaoke-score').textContent = musicState.karaokeScore;
        }

        // Start Karaoke Playback
        function startKaraokePlayback() {
            const words = document.querySelectorAll('.karaoke-word');
            musicState.karaokeWordIndex = 0;
            
            // Reset all words
            words.forEach(word => word.classList.remove('highlight'));
            
            // Update button
            document.getElementById('karaoke-play-btn').innerHTML = 'üé§ Cantando...';
            
            // Start highlighting words
            musicState.karaokeInterval = setInterval(() => {
                // Remove previous highlight
                if (musicState.karaokeWordIndex > 0) {
                    words[musicState.karaokeWordIndex - 1].classList.remove('highlight');
                }
                
                // Add current highlight
                if (musicState.karaokeWordIndex < words.length) {
                    words[musicState.karaokeWordIndex].classList.add('highlight');
                    
                    // Update progress
                    const progress = (musicState.karaokeWordIndex / words.length) * 100;
                    document.getElementById('karaoke-progress').style.width = progress + '%';
                    
                    // Update stats
                    document.getElementById('words-sung').textContent = `${musicState.karaokeWordIndex}/${words.length}`;
                    
                    // Add score
                    musicState.karaokeScore += 10;
                    document.getElementById('karaoke-score').textContent = musicState.karaokeScore;
                    
                    musicState.karaokeWordIndex++;
                } else {
                    // End of song
                    clearInterval(musicState.karaokeInterval);
                    document.getElementById('karaoke-play-btn').innerHTML = 'üé§ Come√ßar Karaok√™';
                    showAchievement('Karaok√™ completado! +' + musicState.karaokeScore + ' pontos');
                }
            }, 800 / musicState.karaokeSpeed);
        }

        // Pause Karaoke
        function pauseKaraoke() {
            if (musicState.karaokeInterval) {
                clearInterval(musicState.karaokeInterval);
                document.getElementById('karaoke-play-btn').innerHTML = 'üé§ Continuar';
            }
        }

        // Restart Karaoke
        function restartKaraoke() {
            if (musicState.karaokeInterval) {
                clearInterval(musicState.karaokeInterval);
            }
            
            // Reset everything
            document.querySelectorAll('.karaoke-word').forEach(word => word.classList.remove('highlight'));
            document.getElementById('karaoke-progress').style.width = '0%';
            document.getElementById('karaoke-play-btn').innerHTML = 'üé§ Come√ßar Karaok√™';
            musicState.karaokeWordIndex = 0;
            musicState.karaokeScore = 0;
            document.getElementById('karaoke-score').textContent = musicState.karaokeScore;
            document.getElementById('words-sung').textContent = '0/45';
        }

        // Set Karaoke Speed
        function setKaraokeSpeed(speed) {
            musicState.karaokeSpeed = speed;
            
            // Update button states
            document.querySelectorAll('[onclick^="setKaraokeSpeed"]').forEach(btn => {
                btn.classList.remove('bg-yellow-500', 'bg-yellow-600');
            });
            event.target.classList.add('bg-yellow-500');
            
            showAchievement(`Velocidade alterada para ${Math.round(speed * 100)}%`);
        }

        // Practice Word
        function practiceWord(word) {
            showAchievement(`Praticando pron√∫ncia: "${word}"`);
            
            // Simulate pronunciation practice
            const button = event.target;
            button.style.transform = 'scale(1.1)';
            setTimeout(() => {
                button.style.transform = 'scale(1)';
            }, 300);
        }

        // Start Vocabulary Mode
        function startVocabulary() {
            document.getElementById('main-dashboard').style.display = 'none';
            document.getElementById('fill-blanks-interface').style.display = 'none';
            document.getElementById('karaoke-interface').style.display = 'none';
            document.getElementById('vocabulary-interface').style.display = 'block';
            musicState.currentMode = 'vocabulary';
        }

        // Start Flashcards
        function startFlashcards() {
            musicState.vocabularyMode = 'flashcards';
            document.getElementById('flashcards-mode').style.display = 'block';
            document.getElementById('word-match-mode').style.display = 'none';
            document.getElementById('spelling-mode').style.display = 'none';
            
            loadFlashcard();
        }

        // Load Flashcard
        function loadFlashcard() {
            const vocab = vocabularyDatabase[musicState.flashcardIndex];
            
            document.getElementById('flashcard-word').textContent = vocab.word.toUpperCase();
            document.getElementById('flashcard-translation').textContent = vocab.translation.toUpperCase();
            document.getElementById('flashcard-pronunciation').textContent = vocab.pronunciation;
            document.getElementById('flashcard-example').textContent = `"${vocab.word}" aparece em: ${vocab.song}`;
            
            // Reset card state
            document.getElementById('flashcard').classList.remove('flipped');
            document.getElementById('flashcard-front').classList.remove('hidden');
            document.getElementById('flashcard-back').classList.add('hidden');
        }

        // Flip Card
        function flipCard() {
            const card = document.getElementById('flashcard');
            const front = document.getElementById('flashcard-front');
            const back = document.getElementById('flashcard-back');
            
            card.classList.toggle('flipped');
            
            if (card.classList.contains('flipped')) {
                front.classList.add('hidden');
                back.classList.remove('hidden');
            } else {
                front.classList.remove('hidden');
                back.classList.add('hidden');
            }
        }

        // Mark Difficult
        function markDifficult() {
            showAchievement('Palavra marcada como dif√≠cil para revis√£o');
            nextFlashcard();
        }

        // Mark Easy
        function markEasy() {
            showAchievement('√ìtimo! Palavra aprendida');
            nextFlashcard();
        }

        // Next Flashcard
        function nextFlashcard() {
            musicState.flashcardIndex = (musicState.flashcardIndex + 1) % vocabularyDatabase.length;
            loadFlashcard();
        }

        // Play Word Pronunciation
        function playWordPronunciation() {
            const button = event.target;
            button.style.transform = 'scale(1.2)';
            setTimeout(() => {
                button.style.transform = 'scale(1)';
            }, 300);
            
            showAchievement('Reproduzindo pron√∫ncia...');
        }

        // Start Word Match
        function startWordMatch() {
            musicState.vocabularyMode = 'word-match';
            document.getElementById('flashcards-mode').style.display = 'none';
            document.getElementById('word-match-mode').style.display = 'block';
            document.getElementById('spelling-mode').style.display = 'none';
            
            // Reset match game
            musicState.matchGame = {
                selectedWord: null,
                selectedLang: null,
                matches: 0,
                score: 0
            };
            
            // Reset button states
            document.querySelectorAll('.word-match-btn').forEach(btn => {
                btn.classList.remove('selected', 'matched');
            });
            
            updateMatchScore();
        }

        // Select Match Word
        function selectMatchWord(word, lang) {
            const button = event.target;
            
            if (button.classList.contains('matched')) return;
            
            // Clear previous selections
            document.querySelectorAll('.word-match-btn').forEach(btn => {
                if (!btn.classList.contains('matched')) {
                    btn.classList.remove('selected');
                }
            });
            
            // Select current word
            button.classList.add('selected');
            
            if (musicState.matchGame.selectedWord === null) {
                // First selection
                musicState.matchGame.selectedWord = button.dataset.word;
                musicState.matchGame.selectedLang = lang;
            } else {
                // Second selection - check match
                const firstWord = musicState.matchGame.selectedWord;
                const secondWord = button.dataset.word;
                
                if (firstWord === secondWord && musicState.matchGame.selectedLang !== lang) {
                    // Match found!
                    document.querySelectorAll(`[data-word="${firstWord}"]`).forEach(btn => {
                        btn.classList.add('matched');
                        btn.classList.remove('selected');
                    });
                    
                    musicState.matchGame.matches++;
                    musicState.matchGame.score += 100;
                    
                    showAchievement('Acerto! +100 pontos');
                    
                    if (musicState.matchGame.matches === 4) {
                        showAchievement('Jogo completo! Parab√©ns!');
                    }
                } else {
                    // No match
                    setTimeout(() => {
                        document.querySelectorAll('.word-match-btn').forEach(btn => {
                            if (!btn.classList.contains('matched')) {
                                btn.classList.remove('selected');
                            }
                        });
                    }, 1000);
                }
                
                // Reset selection
                musicState.matchGame.selectedWord = null;
                musicState.matchGame.selectedLang = null;
                
                updateMatchScore();
            }
        }

        // Update Match Score
        function updateMatchScore() {
            document.getElementById('match-score').textContent = `Pontua√ß√£o: ${musicState.matchGame.score}`;
            document.getElementById('matches-made').textContent = `Acertos: ${musicState.matchGame.matches}/4`;
        }

        // Start Spelling Challenge
        function startSpellingChallenge() {
            musicState.vocabularyMode = 'spelling';
            document.getElementById('flashcards-mode').style.display = 'none';
            document.getElementById('word-match-mode').style.display = 'none';
            document.getElementById('spelling-mode').style.display = 'block';
            
            loadSpellingWord();
        }

        // Load Spelling Word
        function loadSpellingWord() {
            const word = musicState.spellingWords[musicState.currentSpellingIndex];
            const vocab = vocabularyDatabase.find(v => v.word === word);
            
            document.getElementById('spelling-hint').textContent = vocab.translation;
            document.getElementById('letter-hints').textContent = generateLetterHints(word);
            document.getElementById('spelling-input').value = '';
            document.getElementById('spelling-input').className = 'spelling-input w-full';
        }

        // Generate Letter Hints
        function generateLetterHints(word) {
            let hints = '';
            for (let i = 0; i < word.length; i++) {
                if (i === 0 || i === word.length - 1) {
                    hints += word[i].toUpperCase();
                } else {
                    hints += ' _';
                }
                if (i < word.length - 1) hints += ' ';
            }
            return hints;
        }

        // Play Spelling Word
        function playSpellingWord() {
            const button = event.target;
            button.style.transform = 'scale(1.1)';
            setTimeout(() => {
                button.style.transform = 'scale(1)';
            }, 300);
            
            showAchievement('Reproduzindo palavra...');
        }

        // Check Spelling
        function checkSpelling() {
            const input = document.getElementById('spelling-input');
            const userWord = input.value.toLowerCase().trim();
            const correctWord = musicState.spellingWords[musicState.currentSpellingIndex];
            
            if (userWord === correctWord) {
                input.classList.add('correct');
                showAchievement('Correto! +50 pontos');
                
                setTimeout(() => {
                    nextSpellingWord();
                }, 1500);
            } else {
                input.classList.add('incorrect');
                setTimeout(() => {
                    input.classList.remove('incorrect');
                }, 500);
            }
        }

        // Show Spelling Hint
        function showSpellingHint() {
            const word = musicState.spellingWords[musicState.currentSpellingIndex];
            const hints = word.split('').map((letter, index) => {
                if (index < 3) return letter.toUpperCase();
                return '_';
            }).join(' ');
            
            document.getElementById('letter-hints').textContent = hints;
            showAchievement('Dica revelada!');
        }

        // Next Spelling Word
        function nextSpellingWord() {
            musicState.currentSpellingIndex = (musicState.currentSpellingIndex + 1) % musicState.spellingWords.length;
            loadSpellingWord();
        }

        // Filter Vocabulary
        function filterVocab(category) {
            // Update filter buttons
            document.querySelectorAll('[onclick^="filterVocab"]').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Filter vocabulary cards
            document.querySelectorAll('[data-category]').forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Play Vocabulary Pronunciation
        function playVocabPronunciation(word) {
            const button = event.target;
            button.style.transform = 'scale(1.2)';
            setTimeout(() => {
                button.style.transform = 'scale(1)';
            }, 300);
            
            showAchievement(`Reproduzindo: "${word}"`);
        }

        // Add to Favorites
        function addToFavorites(word) {
            const button = event.target;
            button.textContent = '‚≠ê';
            button.style.background = 'linear-gradient(135deg, #fdcb6e, #e17055)';
            
            showAchievement(`"${word}" adicionada aos favoritos!`);
        }

        // Toggle Playback
        function togglePlayback() {
            musicState.isPlaying = !musicState.isPlaying;
            const playIcon = document.getElementById('play-icon');
            
            if (musicState.isPlaying) {
                playIcon.textContent = '‚è∏Ô∏è';
                document.querySelectorAll('.wave-bar').forEach(bar => {
                    bar.style.animationPlayState = 'running';
                });
            } else {
                playIcon.textContent = '‚ñ∂Ô∏è';
                document.querySelectorAll('.wave-bar').forEach(bar => {
                    bar.style.animationPlayState = 'paused';
                });
            }
        }

        // Show Hint
        function showHint() {
            const activeBlank = document.querySelector('.lyric-line.active .word-blank');
            if (activeBlank) {
                const word = activeBlank.dataset.word;
                const hint = word.charAt(0) + '_'.repeat(word.length - 1);
                
                const originalText = activeBlank.textContent;
                activeBlank.textContent = hint;
                activeBlank.style.background = 'linear-gradient(135deg, #fdcb6e, #e17055)';
                
                setTimeout(() => {
                    activeBlank.textContent = originalText;
                    activeBlank.style.background = 'rgba(116, 185, 255, 0.2)';
                }, 2000);
            }
        }

        // Play Pronunciation
        function playPronunciation(word) {
            const button = event.target;
            button.style.transform = 'scale(1.2)';
            button.textContent = 'üîä';
            
            setTimeout(() => {
                button.style.transform = 'scale(1)';
                button.textContent = 'üîä';
            }, 500);
            
            showAchievement(`Pron√∫ncia de "${word}" reproduzida!`);
        }

        // Filter by Genre
        function filterGenre(genre) {
            musicState.selectedGenre = genre;
            
            document.querySelectorAll('.filter-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const songCards = document.querySelectorAll('[data-genre]');
            songCards.forEach(card => {
                if (genre === 'all' || card.dataset.genre === genre) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        // Select Song
        function selectSong(songId) {
            musicState.selectedSong = songId;
            startFillBlanks();
        }

        // Show Achievement
        function showAchievement(text) {
            const popup = document.getElementById('achievement-popup');
            const achievementText = document.getElementById('achievement-text');
            
            achievementText.textContent = text;
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }

        // Navigation
        function goBackToDashboard() {
            document.getElementById('fill-blanks-interface').style.display = 'none';
            document.getElementById('karaoke-interface').style.display = 'none';
            document.getElementById('vocabulary-interface').style.display = 'none';
            document.getElementById('main-dashboard').style.display = 'block';
            musicState.currentMode = 'dashboard';
            
            // Stop any active intervals
            if (musicState.karaokeInterval) {
                clearInterval(musicState.karaokeInterval);
            }
        }

        function goBack() {
            if (musicState.currentMode !== 'dashboard') {
                goBackToDashboard();
            } else {
                window.history.back();
            }
        }

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            // Add hover effects to song cards
            document.querySelectorAll('.music-card').forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-10px) scale(1.02)';
                });
                
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0) scale(1)';
                });
            });
            
            // Simulate real-time stats updates
            setInterval(() => {
                if (musicState.currentMode === 'dashboard') {
                    const vocabElement = document.getElementById('vocab-learned');
                    if (Math.random() > 0.95) {
                        const currentVocab = parseInt(vocabElement.textContent);
                        vocabElement.textContent = currentVocab + 1;
                    }
                }
            }, 15000);
            
            // Add word hover translations
            document.addEventListener('mouseover', function(e) {
                if (e.target.classList.contains('karaoke-word')) {
                    const tooltip = document.getElementById('translation-tooltip');
                    tooltip.textContent = 'Tradu√ß√£o: ' + e.target.textContent;
                    tooltip.style.left = e.pageX + 'px';
                    tooltip.style.top = (e.pageY - 40) + 'px';
                    tooltip.classList.add('show');
                }
            });
            
            document.addEventListener('mouseout', function(e) {
                if (e.target.classList.contains('karaoke-word')) {
                    document.getElementById('translation-tooltip').classList.remove('show');
                }
            });

            // Add Enter key support for spelling
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && musicState.vocabularyMode === 'spelling') {
                    checkSpelling();
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'976531eca0f0ae93',t:'MTc1NjM5ODY0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
