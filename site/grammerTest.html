<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grammar Quest - Treino de Gram√°tica</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-flip { 
            perspective: 1000px;
            transform-style: preserve-3d;
            transition: transform 0.6s;
        }
        .card-flip.flipped { transform: rotateY(180deg); }
        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .card-back { transform: rotateY(180deg); }
        .bounce-in { animation: bounceIn 0.6s ease-out; }
        .shake { animation: shake 0.5s ease-in-out; }
        .pulse-success { animation: pulseSuccess 0.8s ease-in-out; }
        .float { animation: float 3s ease-in-out infinite; }
        
        @keyframes bounceIn {
            0% { transform: scale(0.3) rotate(-10deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(5deg); }
            70% { transform: scale(0.9) rotate(-2deg); }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @keyframes pulseSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); box-shadow: 0 0 30px rgba(34, 197, 94, 0.6); }
            100% { transform: scale(1); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .star-animation { animation: starPop 0.8s ease-out; }
        @keyframes starPop {
            0% { transform: scale(0) rotate(0deg); opacity: 0; }
            50% { transform: scale(1.3) rotate(180deg); opacity: 1; }
            100% { transform: scale(1) rotate(360deg); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-100 min-h-screen">
    <!-- Header with Game Stats -->
    <header class="gradient-bg text-white shadow-xl">
        <div class="max-w-6xl mx-auto px-4 py-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <button onclick="goBack()" class="bg-white/20 hover:bg-white/30 p-2 rounded-lg transition-colors">
                        <span class="text-xl">‚Üê</span>
                    </button>
                    <div>
                        <h1 class="text-2xl font-bold">Grammar Quest</h1>
                        <p class="text-blue-100">Present Perfect Continuous</p>
                    </div>
                </div>
                
                <div class="flex items-center space-x-6">
                    <!-- Score -->
                    <div class="text-center">
                        <div class="text-2xl font-bold" id="score">0</div>
                        <div class="text-xs text-blue-100">Pontos</div>
                    </div>
                    
                    <!-- Streak -->
                    <div class="text-center">
                        <div class="flex items-center space-x-1">
                            <span class="text-xl">üî•</span>
                            <span class="text-2xl font-bold" id="streak">0</span>
                        </div>
                        <div class="text-xs text-blue-100">Sequ√™ncia</div>
                    </div>
                    
                    <!-- Lives -->
                    <div class="text-center">
                        <div class="flex space-x-1" id="lives">
                            <span class="text-xl">‚ù§Ô∏è</span>
                            <span class="text-xl">‚ù§Ô∏è</span>
                            <span class="text-xl">‚ù§Ô∏è</span>
                        </div>
                        <div class="text-xs text-blue-100">Vidas</div>
                    </div>
                </div>
            </div>
            
            <!-- Progress Bar -->
            <div class="mt-4">
                <div class="flex justify-between text-sm mb-2">
                    <span>Progresso da Li√ß√£o</span>
                    <span id="progress-text">1/10</span>
                </div>
                <div class="w-full bg-white/20 rounded-full h-3">
                    <div class="bg-white h-3 rounded-full transition-all duration-500" style="width: 10%" id="progress-bar"></div>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-4xl mx-auto px-4 py-8">
        <!-- Question Counter and Instructions -->
        <div class="text-center mb-8">
            <div class="inline-flex items-center bg-white rounded-full px-6 py-3 shadow-lg mb-4">
                <span class="text-2xl mr-2">üéØ</span>
                <span class="font-semibold text-gray-700">Quest√£o <span id="question-number">1</span> de 10</span>
            </div>
            <p class="text-gray-600 max-w-2xl mx-auto">
                Complete a frase com a forma correta do Present Perfect Continuous. Clique no card para ver a tradu√ß√£o!
            </p>
        </div>

        <!-- Main Game Card -->
        <div class="bg-white rounded-3xl shadow-2xl p-8 mb-8 bounce-in" id="main-card">
            <!-- Sentence with blank -->
            <div class="text-center mb-8">
                <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6">
                    <div class="text-2xl font-semibold text-gray-800 mb-4" id="sentence">
                        She _______ English for three years now.
                    </div>
                    <div class="text-gray-600 italic" id="translation">
                        Ela _______ ingl√™s h√° tr√™s anos.
                    </div>
                </div>
                
                <!-- Visual Context (when available) -->
                <div class="mb-6" id="visual-context">
                    <div class="w-32 h-32 mx-auto bg-gradient-to-br from-pink-100 to-purple-100 rounded-2xl flex items-center justify-center text-6xl float">
                        üìö
                    </div>
                    <p class="text-sm text-gray-500 mt-2">Contexto visual</p>
                </div>
            </div>

            <!-- Answer Options as Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="options-container">
                <!-- Option cards will be generated here -->
            </div>
        </div>

        <!-- Feedback Section -->
        <div class="text-center" id="feedback-section" style="display: none;">
            <div class="bg-white rounded-2xl shadow-lg p-6 mb-6" id="feedback-card">
                <div class="text-6xl mb-4" id="feedback-emoji">üéâ</div>
                <div class="text-2xl font-bold mb-2" id="feedback-title">Excelente!</div>
                <div class="text-gray-600 mb-4" id="feedback-text">Voc√™ acertou! Continue assim!</div>
                <div class="bg-blue-50 rounded-xl p-4 mb-4" id="explanation">
                    <h4 class="font-semibold text-blue-800 mb-2">üí° Explica√ß√£o</h4>
                    <p class="text-blue-700 text-sm">O Present Perfect Continuous √© usado para a√ß√µes que come√ßaram no passado e continuam at√© o presente.</p>
                </div>
            </div>
            <button onclick="nextQuestion()" class="bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-2xl font-bold text-lg hover:from-green-600 hover:to-blue-600 transition-all transform hover:scale-105">
                Pr√≥xima Quest√£o ‚Üí
            </button>
        </div>

        <!-- Achievement Popup -->
        <div class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" id="achievement-popup" style="display: none;">
            <div class="bg-white rounded-3xl p-8 text-center max-w-md mx-4 transform scale-0" id="achievement-content">
                <div class="text-8xl mb-4">üèÜ</div>
                <h3 class="text-2xl font-bold text-gray-800 mb-2">Conquista Desbloqueada!</h3>
                <p class="text-gray-600 mb-6" id="achievement-text">Primeira sequ√™ncia de 3 acertos!</p>
                <button onclick="closeAchievement()" class="bg-gradient-to-r from-yellow-400 to-orange-500 text-white px-6 py-3 rounded-xl font-semibold">
                    Incr√≠vel! üéâ
                </button>
            </div>
        </div>
    </div>

    <!-- Floating Particles for Success -->
    <div id="particles-container" class="fixed inset-0 pointer-events-none z-40"></div>

    <script>
        // Game State
        let gameState = {
            score: 0,
            streak: 0,
            lives: 3,
            currentQuestion: 1,
            totalQuestions: 10,
            questions: [
                {
                    sentence: "She _______ English for three years now.",
                    translation: "Ela _______ ingl√™s h√° tr√™s anos.",
                    visual: "üìö",
                    options: [
                        { text: "has been studying", correct: true },
                        { text: "is studying", correct: false },
                        { text: "studies", correct: false },
                        { text: "studied", correct: false }
                    ],
                    explanation: "O Present Perfect Continuous √© usado para a√ß√µes que come√ßaram no passado e continuam at√© o presente. 'Has been studying' indica que ela come√ßou a estudar h√° tr√™s anos e ainda continua."
                },
                {
                    sentence: "They _______ in this city since 2020.",
                    translation: "Eles _______ nesta cidade desde 2020.",
                    visual: "üèôÔ∏è",
                    options: [
                        { text: "have been living", correct: true },
                        { text: "are living", correct: false },
                        { text: "live", correct: false },
                        { text: "lived", correct: false }
                    ],
                    explanation: "'Have been living' mostra uma a√ß√£o cont√≠nua que come√ßou em 2020 e continua at√© agora."
                }
            ]
        };

        // Initialize game
        function initGame() {
            updateUI();
            loadQuestion();
        }

        // Update UI elements
        function updateUI() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('streak').textContent = gameState.streak;
            document.getElementById('question-number').textContent = gameState.currentQuestion;
            document.getElementById('progress-text').textContent = `${gameState.currentQuestion}/${gameState.totalQuestions}`;
            document.getElementById('progress-bar').style.width = `${(gameState.currentQuestion / gameState.totalQuestions) * 100}%`;
            
            // Update lives
            const livesContainer = document.getElementById('lives');
            livesContainer.innerHTML = '';
            for (let i = 0; i < 3; i++) {
                const heart = document.createElement('span');
                heart.className = 'text-xl';
                heart.textContent = i < gameState.lives ? '‚ù§Ô∏è' : 'üñ§';
                livesContainer.appendChild(heart);
            }
        }

        // Load current question
        function loadQuestion() {
            const question = gameState.questions[(gameState.currentQuestion - 1) % gameState.questions.length];
            
            document.getElementById('sentence').textContent = question.sentence;
            document.getElementById('translation').textContent = question.translation;
            document.getElementById('visual-context').innerHTML = `
                <div class="w-32 h-32 mx-auto bg-gradient-to-br from-pink-100 to-purple-100 rounded-2xl flex items-center justify-center text-6xl float">
                    ${question.visual}
                </div>
                <p class="text-sm text-gray-500 mt-2">Contexto visual</p>
            `;

            // Create option cards
            const optionsContainer = document.getElementById('options-container');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionCard = document.createElement('div');
                optionCard.className = 'bg-gradient-to-br from-white to-gray-50 border-2 border-gray-200 rounded-2xl p-6 cursor-pointer hover:border-blue-300 hover:shadow-lg transition-all transform hover:scale-105';
                optionCard.innerHTML = `
                    <div class="text-center">
                        <div class="text-lg font-semibold text-gray-800">${option.text}</div>
                    </div>
                `;
                optionCard.onclick = () => selectAnswer(option.correct, optionCard, question.explanation);
                optionsContainer.appendChild(optionCard);
            });

            // Hide feedback
            document.getElementById('feedback-section').style.display = 'none';
        }

        // Handle answer selection
        function selectAnswer(isCorrect, selectedCard, explanation) {
            // Disable all options
            const options = document.querySelectorAll('#options-container > div');
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });

            if (isCorrect) {
                // Correct answer
                selectedCard.className = 'bg-gradient-to-br from-green-100 to-green-200 border-2 border-green-400 rounded-2xl p-6 pulse-success';
                gameState.score += 10;
                gameState.streak += 1;
                
                // Show success feedback
                showFeedback(true, explanation);
                createParticles();
                
                // Check for achievements
                if (gameState.streak === 3) {
                    setTimeout(() => showAchievement("Primeira sequ√™ncia de 3 acertos!"), 1000);
                }
                
            } else {
                // Wrong answer
                selectedCard.className = 'bg-gradient-to-br from-red-100 to-red-200 border-2 border-red-400 rounded-2xl p-6 shake';
                gameState.lives -= 1;
                gameState.streak = 0;
                
                // Highlight correct answer
                options.forEach((option, index) => {
                    const question = gameState.questions[(gameState.currentQuestion - 1) % gameState.questions.length];
                    if (question.options[index] && question.options[index].correct) {
                        option.className = 'bg-gradient-to-br from-green-100 to-green-200 border-2 border-green-400 rounded-2xl p-6';
                    }
                });
                
                showFeedback(false, explanation);
            }

            updateUI();
        }

        // Show feedback
        function showFeedback(isCorrect, explanation) {
            const feedbackSection = document.getElementById('feedback-section');
            const feedbackEmoji = document.getElementById('feedback-emoji');
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackText = document.getElementById('feedback-text');
            const explanationDiv = document.getElementById('explanation');

            if (isCorrect) {
                feedbackEmoji.textContent = 'üéâ';
                feedbackTitle.textContent = 'Excelente!';
                feedbackText.textContent = `+10 pontos! Sequ√™ncia: ${gameState.streak}`;
                document.getElementById('feedback-card').className = 'bg-gradient-to-br from-green-50 to-green-100 rounded-2xl shadow-lg p-6 mb-6';
            } else {
                feedbackEmoji.textContent = 'üòÖ';
                feedbackTitle.textContent = 'Quase l√°!';
                feedbackText.textContent = 'N√£o desista! Vamos para a pr√≥xima.';
                document.getElementById('feedback-card').className = 'bg-gradient-to-br from-red-50 to-red-100 rounded-2xl shadow-lg p-6 mb-6';
            }

            explanationDiv.innerHTML = `
                <h4 class="font-semibold text-blue-800 mb-2">üí° Explica√ß√£o</h4>
                <p class="text-blue-700 text-sm">${explanation}</p>
            `;

            feedbackSection.style.display = 'block';
            feedbackSection.scrollIntoView({ behavior: 'smooth' });
        }

        // Next question
        function nextQuestion() {
            if (gameState.currentQuestion < gameState.totalQuestions) {
                gameState.currentQuestion += 1;
                document.getElementById('main-card').className = 'bg-white rounded-3xl shadow-2xl p-8 mb-8 bounce-in';
                setTimeout(() => {
                    loadQuestion();
                    updateUI();
                }, 300);
            } else {
                // Game completed
                showGameComplete();
            }
        }

        // Create success particles
        function createParticles() {
            const container = document.getElementById('particles-container');
            const colors = ['üåü', '‚ú®', 'üéâ', 'üéä'];
            
            for (let i = 0; i < 15; i++) {
                const particle = document.createElement('div');
                particle.textContent = colors[Math.floor(Math.random() * colors.length)];
                particle.className = 'absolute text-2xl pointer-events-none star-animation';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 0.5 + 's';
                
                container.appendChild(particle);
                
                setTimeout(() => {
                    particle.remove();
                }, 2000);
            }
        }

        // Show achievement
        function showAchievement(text) {
            document.getElementById('achievement-text').textContent = text;
            document.getElementById('achievement-popup').style.display = 'flex';
            setTimeout(() => {
                document.getElementById('achievement-content').style.transform = 'scale(1)';
            }, 100);
        }

        // Close achievement
        function closeAchievement() {
            document.getElementById('achievement-content').style.transform = 'scale(0)';
            setTimeout(() => {
                document.getElementById('achievement-popup').style.display = 'none';
            }, 300);
        }

        // Go back
        function goBack() {
            if (confirm('Tem certeza que deseja sair? Seu progresso ser√° perdido.')) {
                window.history.back();
            }
        }

        // Show game complete
        function showGameComplete() {
            document.getElementById('main-card').innerHTML = `
                <div class="text-center">
                    <div class="text-8xl mb-6">üèÜ</div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4">Parab√©ns!</h2>
                    <p class="text-xl text-gray-600 mb-6">Voc√™ completou a li√ß√£o!</p>
                    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl p-6 mb-6">
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div>
                                <div class="text-2xl font-bold text-blue-600">${gameState.score}</div>
                                <div class="text-sm text-gray-600">Pontos</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-orange-600">${gameState.streak}</div>
                                <div class="text-sm text-gray-600">Melhor Sequ√™ncia</div>
                            </div>
                            <div>
                                <div class="text-2xl font-bold text-green-600">${Math.round((gameState.score / (gameState.totalQuestions * 10)) * 100)}%</div>
                                <div class="text-sm text-gray-600">Precis√£o</div>
                            </div>
                        </div>
                    </div>
                    <div class="space-y-4">
                        <button onclick="window.history.back()" class="w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-2xl font-bold text-lg hover:from-blue-600 hover:to-purple-700 transition-all">
                            Voltar ao Dashboard
                        </button>
                        <button onclick="location.reload()" class="w-full bg-gray-200 text-gray-700 py-4 rounded-2xl font-bold text-lg hover:bg-gray-300 transition-all">
                            Jogar Novamente
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('feedback-section').style.display = 'none';
            createParticles();
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9760af4ff34f8e5a',t:'MTc1NjM1MTM1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
